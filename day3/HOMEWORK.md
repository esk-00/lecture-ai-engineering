# day3 課題

第3回「機械学習システムの改善」に関する任意課題。

# 課題内容

1. 独自の質問と参照資料の作成
    - 自分で5つ以上の質問文を考案してください
    - 各質問に対する回答を含む参照文書を用意してください
    - 少なくとも1つは、LLMが単体では正確に答えられないような知識を含む質問にしてください
2. 実験の実施
    - 演習で使用したコードをベースに、以下の2つの方法で回答を生成してください
        - ベースのLLM(RAGなし)での回答生成
        - RAGを組み合わせた回答生成
    - 回答の評価では、単純なYes/No判定でも良いです
        - より詳細な評価指標も検討していただけるとなお良いです

3. 結果分析と考察
    - 生成した結果をまとめ、RAGありとRAGなしの差異を分析してください
    - RAGによって回答が改善したケースと悪化したケースの両方について考察してください
    - 結果に基づいて、RAGの有効性と限界についての考察を記述してください


#　質問設計の観点と意図

今回作成した質問は以下の５つである。
それぞれの設計の観点と意図についてまとめる。

1. モンテカルロ法がLLMの推論の性能を向上させることができるのか教えて
    - 観点
        - 生成AIのウィークポイント/RAGのストロングポイントの観点から質問を考案。
    - 意図
        - LLMについての最近の研究結果について質問することで、生成AIが新しい知見については正しい情報を提示しにくいことを確かめる。

2. LangChainについて教えて
    - 観点
        - 生成AIのストロングポイントの観点から質問を考案。
    - 意図
        - 以前から成果がでている、フレームワークについて質問をする。最近の情報ではないので、正しい情報を提示できることを確認。
　
3. 最近人気の生成AIツールについて３つ紹介をしてください。
    - 観点
        - 生成AIのウィークポイント/RAGのストロングポイントの観点から質問を考案。
    - 意図
        - 最近の複雑な情報について正しく確かめられるかの確認。

4. 最近人気の生成AIツールについて３つ紹介をしてください。その際に活用方法について１つ教えてください
    - 観点
        - RAGのストロングポイントの観点から質問を考案。
    - 意図
        - 複雑な情報について正しく確かめられるかの確認と最近の情報を取り入れることができるか、活用方法も紹介できるか

5. 教育DX・GIGAスクール構想について、今後の方針について教えてください。あなたの考えも教えてください
    - 観点
        - RAGのストロングポイントの観点から質問を考案。
    - 意図
        - 専門的な複雑な情報について正しく確かめられるかの確認と最近の情報とそれから考えを創出できるかの確認

#　RAGの実装方法と工夫点

## 実装方法
embeddingモデル
    - inf-retriever-v1-1.5b

## 工夫点
1. データ
    - webスクレイピングで作成  
        - webスクレイピングで作成したテキストファイルを「。」で単位でテキストを分割した。

2. 検索方法
    - シンプルな類似度ベースの検索でクエリに関連する文を抽出　

3. 評価
    - 回答に対する評価をYES/NOで行う。
    - 大文字小文字を区別せず、最初の単語のみを考慮。

4. 制約条件
    - モデルの入力トークン制限に収まるよう関連文のみを選択　
    - cudaのメモリーエラーが起きたため、一部データを抜粋　

#　結果の分析と考察

1. モンテカルロ法がLLMの推論の性能を向上させることができるのか教えて

## 結果
## RAGなし 
はい、**モンテカルロ木探索 (MCTS)** は LLM の推論の性能を向上させる可能性があります。

**モンテカルロ木探索** は、複雑な推論問題を解決する際に、**探索と学習** を組み合わせた計画技術です。LLM の多段階推論能力を向上させるには、**探索** を用いて、**学習** を用いて最適な行動を選択するようなアプローチが考えられます。

**モンテカルロ木探索のメリット**

* **複雑な状況に対応:**  複雑な推論問題を解決する際に、従来の探索方法では困難な状況に対応できます。
* **学習の効率性:**  MCTS は、過去の経験から学習し、より良い行動を選択する能力を持っています。
* **柔軟性:**  MCTS は、様々な種類の推論問題に対応できます。


**ただし、MCTS の導入にはいくつかの課題も存在します。**

* **計算コスト:**  MCTS は、複雑な推論問題を解決する際に、計算コストがかかります。
* **初期化の難しさ:**  MCTS の初期化は、複雑な推論問題を解決する際に、難しい場合があります

評価結果:
良い回答か: No
  | はい、モンテカルロ法はLLMの推論性能を向上させる可能性があります。 

**モンテカルロ法とは**

モンテカルロ法は、確率的探索法の一種で、未知の値を推定するために、ランダムな試行と評価の繰り返しを行う手法です。 

**LLMの推論におけるモンテカルロ法の活用**

1. **探索空間の効率的な探索:**  LLMは複雑なモデルであり、推論の過程で様々な可能性を考慮する必要があります。モンテカルロ法は、探索空間を効率的に探索し、より良い推論結果を得る可能性があります。
2. **データの解釈:**  モンテカルロ法は、データから学習したモデルの推論結果を解釈し、より正確な推論結果を得るのに役立ちます。
3. **複雑な問題の解決:**  複雑な問題を解決する際に、モンテカルロ法は、LLMの推論能力を向上させることで、より複雑な問題の解決に貢献します。

**具体的な例**

* **文章生成:**  モンテカルロ法を用いて、LLMがより自然

評価結果:
良い回答か: No
  |

## RAG
はい、**モンテカルロ木探索 (MCTS)** は LLM の推論の性能を向上させる可能性があります。

**モンテカルロ木探索** は、複雑な推論問題を解決する際に、**探索と学習** を組み合わせた計画技術です。LLM の多段階推論能力を向上させるには、**探索** を用いて、**学習** を用いて最適な行動を選択するようなアプローチが考えられます。

**モンテカルロ木探索のメリット**

* **複雑な状況に対応:**  複雑な推論問題を解決する際に、従来の探索方法では困難な状況に対応できます。
* **学習の効率性:**  MCTS は、過去の経験から学習し、より良い行動を選択する能力を持っています。
* **柔軟性:**  MCTS は、様々な種類の推論問題に対応できます。


**ただし、MCTS の導入にはいくつかの課題も存在します。**

* **計算コスト:**  MCTS は、複雑な推論問題を解決する際に、計算コストがかかります。
* **初期化の難しさ:**  MCTS の初期化は、複雑な推論問題を解決する際に、難しい場合があります

評価結果:
良い回答か: No

## 評価結果
十分だと思うが、"大文字小文字を区別せず、最初の単語のみを考慮。"この条件にマッチしなかった。

## 考察
データを追加することによって、専門用を多用している。また、なしではみられなかった、MCTSを導入する際のメリットや課題についても回答をしている。
当初意図していた、最新の情報もRAGの導入によって絡めて回答することが可能になったと考えている。
ただ、類似度ベースだからか回答内容についてはRAGなしと比較するとほんの少しだけ内容がLLMよりで情報力が多くなった印象。RAGの採用については検索方法の選定も重要になり、データ量も多い方が良いと考えている。


2. LangChainについて教えて

## 結果
## RAGなし 
### LangChain について

**LangChain** は、大規模言語モデル (LLM) を活用したアプリケーション開発を支援するオープンソースのフレームワークです。 

**主な特徴:**

* **LLM の連携:**  様々な LLM (例: ChatGPT, Bard, BLOOM) を統合し、複雑なタスクを実行できます。
* **データの管理:**  データのインデックス、検索、加工など、LLM の処理を効率的に行うためのツールを提供します。
* **アプリケーションの構築:**  アプリケーションの設計、開発、実行を支援します。
* **拡張性:**  独自の LLM を作成したり、既存の LLM を拡張したりできます。
* **オープンソース:**  コミュニティによる開発と拡張が活発です。

**LangChain を使うメリット:**

* **複雑なタスクの自動化:**  従来の LLM を使うと難しいタスクを、LangChain を使って簡単に実行できます。
* **効率的なデータ処理:**  データの管理と加工を自動化することで、開発時間を短縮できます。
* **柔軟なアプリケーション開発:**  様々な LLM と連携し、独自のアプリケーションを構築できます。
* **オープンソース

評価結果:
良い回答か: No


## RAG
### LangChain について

LangChain は、大規模言語モデル (LLM) を活用したアプリケーション開発のためのオープンソースフレームワークです。 

**簡単に言うと、LangChain を使うと、複雑なアプリケーションを、LLM を中心としたシンプルな構成で構築できます。**

**主な特徴は以下の通りです:**

* **チェーンビルディング:**  LangChain は、複雑なアプリケーションを、複数の LLM への接続や処理を組み合わせた「チェーン」で構築できます。
* **柔軟性:**  開発者は、独自の LLM 接続や処理方法を自由にカスタマイズできます。
* **使いやすいインターフェース:**  LangChain は、LLM に接続してクエリを実行するための API を提供し、開発者がコードから LLM に接続する手間を省きます。
* **使いやすいツール:**  LangChain は、チェーンビルディングブロックや LangChain 表現言語 (LCEL) を提供し、プログラミングコマンドで複雑なアプリケーションを構築できます。

**具体的な機能:**

* **LLM インターフェース:**  LLM に直接接続し、クエリを実行できます。
* **リンク:**  ユーザーからの入力を受け取り、処理します。
* **チェーンビルディング

良い回答か: No

## 評価結果
十分だと思うが、"大文字小文字を区別せず、最初の単語のみを考慮。"この条件にマッチしなかった。

## 考察
当初の意図通り、最近の情報ではないので正しい情報を提示できることを確認。することができた。
LangChainもRAG導入前と比べて詳しい情報を提示することが可能となっている。こちらもRAG
導入の結果と言えると考える。
だが、データによって偏りが見えている。 RAG導入前ではLLMの連携についてGPT以外の
ツールについても例として提示しれくれたが、今回は何も記載がない。
RAGの導入にはデータの偏りについても最新の注意を払わなければいけないとともに
今後はデータの偏りが内容にデータセットを作成することが課題となると考える。

3. 最近人気の生成AIツールについて３つ紹介をしてください。

## 結果
## RAGなし 
##  最近人気の生成AIツール３選

**1. ChatGPT (OpenAI)**
   - **特徴:**  自然な会話で文章を作成・編集できる、多様なタスクに対応できる強力なツール。
   - **用途:**  文章作成、要約、翻訳、質問応答、コード生成など、幅広い用途で活用されています。
   - **強み:**  人間に近い会話能力と、多様なタスクに対応できる柔軟性。

**2. DALL-E 2 (OpenAI)**
   - **特徴:**  画像を生成するAIツール。テキストを入力すると、そのテキストに基づいてオリジナルの画像を生成します。
   - **用途:**  イラスト、デザイン、写真、画像編集など、様々な場面で活用できます。
   - **強み:**  高画質で、複雑な画像生成が可能。

**3. Midjourney**
   - **特徴:**  ユーザーがテキストで画像を生成するAIツール。
   - **用途:**  イラスト、デザイン、写真、画像編集など、様々な場面で活用できます。
   - **強み:**  独特の雰囲気と、クリエイティブな表現力を特徴とする。

評価結果:
良い回答か: No

## RAG
最近の生成AIツールとしては、以下の３つが人気です。

1. **ChatGPT:**  文章生成に特化し、様々なジャンルの文章を作成できます。
2. **DALL-E:**  画像生成に特化し、複雑な画像を生成できます。
3. **Midjourney:**  画像生成に特化し、アート作品のような画像を生成できます。


評価結果:
良い回答か: No

## 評価結果
十分だと思うが、"大文字小文字を区別せず、最初の単語のみを考慮。"この条件にマッチしなかった。

## 考察
当初の意図通りにはならず、最新のツールについての回答を提示することはできなかった。
最新の情報を入れたが、ツールが変わらなかった。embモデルの中、検索方法の中にある程度の優先順位がある
と考えられる。また、今回はデータを導入した方が回答の内容が薄くなった。考えられる原因としては導入したデータ
が内容が薄かったためか、類似度ベースとは相性が悪かったかのどちらかである。

4. 最近人気の生成AIツールについて３つ紹介をしてください。その際に活用方法について１つ教えてください

## 結果
## RAGなし 
###  最近人気の生成AIツール３選

**1. ChatGPT (OpenAI)**
   * **メリット:**  自然な会話で質問や要約、文章作成など、様々なタスクに対応できる柔軟性が高い。

**2. DALL-E 2 (OpenAI)**
   * **メリット:**  画像生成能力が非常に高く、複雑なイメージやデザインを簡単に生成できる。

**3. Midjourney**
   * **メリット:**  アート作品のような高画質の画像を生成できる、クリエイティブな表現力を重視するユーザーに人気。

評価結果:
良い回答か: No

## RAG
## 最近人気の生成AIツール３選

1. **Midjourney:**  
    * **特徴:**  美しいアート作品を生成する、人気のある画像生成AIツール。
    * **活用方法:**  テキストを入力して、まるで絵画のようなアート作品を生成できます。例えば、「星空の下で、猫が木の上で眠っている」といったシンプルなテキストで、まるで絵画のような作品が生成されます。
2. **Stable Diffusion:**  
    * **特徴:**  オープンソースで、自由なカスタマイズが可能です。
    * **活用方法:**  画像生成の自由度が高く、様々なスタイルや構図を自由に調整できます。例えば、既存の画像から、新しい要素を生成したり、オリジナルのキャラクターや風景を生成できます。
3. **ChatGPT:**  
    * **特徴:**  テキストを生成するAIツールで、文章作成、翻訳、要約など、様々なタスクに対応できます。
    * **活用方法:**  文章作成の効率化や、アイデアの生成など、様々な場面で活用できます。例えば、ブログ記事のタイトルや文章の構成、ストーリーの展開など、様々な文章作成のサポートができます。

評価結果:
良い回答か: No


## 評価結果
十分だと思うが、"大文字小文字を区別せず、最初の単語のみを考慮。"この条件にマッチしなかった。

## 考察
3と同じデータを使用したが、活用方法のプロンプトを入れると、こちらはRAGを導入した方が詳しい回答を
提示できた。当初の意図通りになった。
考えられる原因としては、今回使用したデータと類似度ベースの検索との相性がよかったためと考えられる。
RAGではデータを意図的に挿入することができるが、検索の種類によって回答の精度が変わるいいモデルケースに
なった。

5. 教育DX・GIGAスクール構想について、今後の方針について教えてください。あなたの考えも教えてください

## 結果
## RAGなし 
## 教育DX・GIGAスクール構想の今後の方針

**教育DX・GIGAスクール構想**は、教育の質・量を向上させるために、デジタル技術を活用した教育システムの構築を目指しています。 

**今後の方針としては、以下の点が挙げられます。**

1. **デジタル技術の普及と活用:**
    * **教育アプリ・ツールへの積極的な導入:**  学習内容の多様化、学習環境の自由化、学習者の個別指導の促進を図る。
    * **教育現場におけるデジタルスキル向上:**  教師・生徒のデジタルスキル向上を促進し、デジタル技術を活用した教育活動の効率化と質の向上を図る。
    * **教育データの活用:**  学習状況や生徒の個性に応じた個別指導や学習内容の最適化を可能にする。
    * **教育プラットフォームの構築:**  教育機関間や地域間での連携を促進し、教育の質向上と地域社会への貢献を図る。

2. **教育の質・量向上:**
    * **学習内容の多様化:**  デジタル技術を活用した学習コンテンツの提供により、多様な学習スタイルに対応する。

評価結果:
良い回答か: No

## RAG
## 教育DX・GIGAスクール構想の今後の方針

**1.  個別最適な学びと協働的な学びの充実:**

*  **1人1台端末の更新:**  5年かけて計画的に更新し、端末の故障時等においても子供たちの学びを止めない観点から予備機の整備も進める。
*  **生成AIの活用:**  生成AIを活用した授業実践研究を行い、効果的な取組実践を創出する。
*  **高度なプログラミング教育:**  プログラミング教育の普及と実践を推進し、デジタルものづくりなどの先進事例を創出する。

**2.  自治体間格差解消:**

*  **集中推進期間:**  令和５～６年を集中推進期間として、効果的な実践事例を創出・横展開する。
*  **伴走支援の強化:**  学校DX戦略アドバイザーの支援を含め、効果的な実践事例の共有と技術の習得を支援する。

**3.  情報活用能力の向上:**

*  **児童生徒の情報活用能力の把握:**  調査研究を実施し、児童生徒の学習状況を

評価結果:
良い回答か: No

## 評価結果
十分だと思うが、"大文字小文字を区別せず、最初の単語のみを考慮。"この条件にマッチしなかった。

## 考察
考えまでは提示できなかった。考えられる原因としてはトークン限界をこえてしまったためである。
だが、RAGを導入することにより、より専門的な内容を提示することができた。デジタルという言葉で以前は
くくっていたが、導入後はDXやプログラミングや生成AIなど専門的な用語も増えた。
RAGの有効性については確認できたが、トークンの限界が来た。なぜプロンプトないの支持を指定されたトークン内
でできないのか気になる。今後調べていきたい。